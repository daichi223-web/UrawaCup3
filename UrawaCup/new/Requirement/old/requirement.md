浦和カップ
トーナメント管理システム
要件定義書
Version 2.0
2024年12月31日
 
1. システム概要
1.1 背景と目的
浦和カップ高校サッカーフェスティバルは、さいたま市サッカー協会が主催する招待大会である。毎年3月下旬に3日間開催され、地元9チームと招待15チームの計24チームが参加する。
現在はExcelファイルで大会運営を行っているが、以下の課題がある：
1.	参加チームの登録作業: 関数でリーグ表・報告書に反映させる際の確認作業が煩雑
2.	書式調整: 年度ごとにフォーマットが微妙に変わり、毎回Excelの調整が必要
3.	試合結果入力の即時性: LINEで報告→担当者が一括入力という流れで、リアルタイム性に欠ける
4.	報告書作成: 逐次報告される結果を即座に報告書へ反映する必要があり負荷が高い
5.	最終日組み合わせ: 対戦履歴を考慮した組み合わせを手作業で作成
1.2 システム化の範囲
機能	優先度	備考
チーム登録の簡略化	高	関数での反映確認作業を削減
選手データ管理	中	得点者入力のサジェスト用
対戦除外設定	高	変則リーグの組み合わせ決定
報告書の自動生成	最高	即時性が求められる
試合結果入力→順位表自動更新	高	リアルタイム反映必須
予選リーグ日程の自動生成	中	手動調整も可能に
決勝T組み合わせの半自動生成	中	対戦履歴考慮+手動変更
研修試合の組み合わせ提案	高	未対戦チェック必須
Excel/PDF出力	最高	既存フォーマット踏襲
複数人での同時入力対応	中	各会場からの入力
オフライン対応	中	会場のネット環境による
 
2. 大会フォーマット（業務要件）
2.1 大会基本情報
●	大会名: さいたま市招待高校サッカーフェスティバル浦和カップ
●	開催期間: 3日間（3月下旬）
●	参加チーム数: 24チーム固定
●	試合時間: 50分（25分ハーフ）※変更可能性あり
●	会場数: 4〜5会場
2.2 チーム構成
2.2.1 地元チーム（9チーム固定）
会場担当校（4校）: 浦和南、市立浦和、浦和学院、武南
その他地元校（5校）: 県立浦和、浦和西、浦和東、浦和レッズユース、大宮アルディージャU18
2.2.2 招待チーム（15チーム）
毎年変動。全国各地の高校・ユースチームを招待。
2.3 グループ分けルール
1.	4グループ（A・B・C・D）× 6チーム = 24チーム
2.	会場担当校は各グループの1番に固定配置: A1=浦和南、B1=市立浦和、C1=浦和学院、D1=武南
3.	地元9チームを4グループに分散（各グループ2〜3チーム）
4.	招待15チームは抽選で残り枠に配置
2.4 大会スケジュール
日程	内容	会場	試合数
Day1	予選リーグ（前半）	4会場同時開催	各会場6試合
Day2	予選リーグ（後半）	4会場同時開催	各会場6試合
Day3	順位決定戦（1位リーグ）	駒場スタジアム	準決勝2+3決+決勝
Day3	研修試合（2〜6位）	他3会場	各会場5〜6試合
2.5 順位決定ルール
以下の優先順位で順位を決定する：
1.	勝点（勝利=3点、引分=1点、敗北=0点）
2.	得失点差（ゴールディファレンス）
3.	総得点
4.	当該チーム間の対戦成績
5.	抽選
2.6 決勝トーナメント組み合わせルール
2.6.1 1位リーグ（準決勝〜決勝）
●	各グループ1位の4チームが進出
●	組み合わせパターン: A1位 vs B1位、C1位 vs D1位（基本形）
●	または予選成績順で有利な位置に配置
●	3位決定戦・決勝戦はPK戦あり（50分で決しない場合）。PKスコアも記録・報告
2.6.2 研修試合（2〜6位）
●	基本ルール: 同順位同士の対戦
●	必須条件: 予選リーグで対戦していないチーム同士
●	手動での変更可能
●	研修試合の結果は報告書に含めない
 
3. 機能要件
3.1 チーム・会場管理機能
3.1.1 チーム登録【優先度: 高】
1.	チーム名の登録・編集・削除
2.	地元/招待の区分設定
3.	会場担当校フラグの設定
4.	グループ（A〜D）・番号（1〜6）の割り当て
5.	過去大会からのチームリストコピー機能
6.	CSV一括インポート/エクスポート
3.1.2 会場管理【優先度: 高】
1.	会場名・住所の登録
2.	担当グループの紐付け（A組→浦和南高G など）
3.	使用可能日の設定（予選用/最終日用）
4.	1日あたりの試合数上限設定（通常6試合）
3.2 選手登録機能
3.2.1 選手データ管理【優先度: 中】
1.	Excel/CSV形式での一括インポート
2.	1チームあたり26〜50名程度の登録に対応
3.	背番号・選手名の登録
4.	チームごとの選手一覧表示・編集
5.	当日の選手変更にも対応（追加・修正可能）
※将来拡張: 得点ランキング、選手別成績への活用可能性あり
3.3 予選リーグ管理機能
3.3.1 対戦除外設定【優先度: 高】
6チーム変則リーグでは各チーム4試合（2チームとは対戦しない）。対戦しないペアを手動で設定する。
除外の判断基準（運用ルール）:
●	地元校同士の対戦を避ける
●	近い地域のチーム同士を避ける
●	他大会で同じリーグに所属するチーム同士を避ける
UI仕様:
●	グループごとに「対戦しないペア」をチェックボックスで選択
●	各チームが2チームを除外するよう制約チェック
●	除外設定完了後、対戦カードを自動生成
3.3.2 日程自動生成【優先度: 中】
1.	対戦除外設定に基づき12試合/グループを自動生成
2.	各会場6試合/日 × 2日間に自動配分
3.	試合間隔の設定（標準65分: 50分試合+15分インターバル）
4.	開始時刻の設定（標準9:30）
5.	ドラッグ&ドロップでの手動調整
3.3.3 試合結果入力【優先度: 最高】
入力項目:
●	スコア（前半・後半・合計・PK※該当時）
●	得点時間（分）
●	得点者名
得点者名入力方式:
●	自由入力欄 + 登録選手名のサジェスト（入力補助）
●	登録外の選手名も自由入力可能（当日変更対応）
●	試合確定後も得点者名の修正可能
入力者:
●	会場担当者がタブレット/スマホから直接入力
●	本部担当者も入力可能（バックアップ）
●	入力完了時に順位表へ即時反映
3.3.4 順位表自動計算【優先度: 最高】
6.	試合結果入力と同時にリアルタイム更新
7.	勝点・得失点差・総得点の自動計算
8.	同勝点時の順位決定ロジック実装（2.5節参照）
9.	グループ別順位表の表示
3.4 決勝トーナメント管理機能
3.4.1 組み合わせ半自動生成【優先度: 中】
自動処理:
●	各グループ1位〜6位の自動抽出
●	予選リーグでの対戦履歴チェック
●	同順位同士かつ未対戦の組み合わせを自動提案
手動調整:
●	ドラッグ&ドロップでの組み合わせ変更
●	対戦済みチーム同士になる場合は警告表示
●	警告を確認の上、強制確定も可能
3.5 報告書生成機能【優先度: 最高】
3.5.1 試合報告書
出力形式: PDF（メール送信用）、Excel（編集用）
出力タイミング: 試合結果入力後、即座に生成可能
出力単位: 日別・会場別
送信先: 埼玉新聞、テレビ埼玉、イシクラ、埼玉県サッカー協会（固定）
記載内容:
●	大会名、日付、会場名
●	対戦カード、スコア（前半/後半/合計）
●	得点経過（時間、チーム名、得点者名）
●	発信元情報（担当者名、連絡先）
3.5.2 現行報告書フォーマット（参考）
既存Excelの報告書フォーマットを踏襲する。1会場につき最大6試合を1ページに収める形式。得点経過欄には、得点時間・チーム名・得点者名を記載。
 
4. 画面設計
4.1 画面一覧
画面名	主な機能	利用者
ダッシュボード	大会進行状況、クイックアクセス	全員
大会設定	大会名、日程、送信先設定	管理者
チーム管理	チーム登録・編集、グループ割当	管理者
選手管理	選手データインポート、編集	管理者
会場管理	会場登録、日程紐付け	管理者
対戦除外設定	対戦しないペアの選択	管理者
予選日程	日程生成、手動調整	管理者
試合結果入力	スコア・得点者入力	会場担当/管理者
順位表	グループ別順位表示	全員
決勝T組み合わせ	半自動生成、手動調整	管理者
報告書出力	PDF/Excel生成、送信	管理者
4.2 画面フロー
大会準備フェーズ:
  大会設定 → チーム登録 → 会場登録 → グループ分け → 日程生成
大会運営フェーズ（Day1-2）:
  試合結果入力 → 順位表確認 → 報告書出力
大会運営フェーズ（Day3）:
  決勝T組み合わせ → 試合結果入力 → 最終順位確定 → 報告書出力
 
5. データ設計
5.1 主要エンティティ
エンティティ	主な属性	備考
Tournament	大会名、開催日程、回数	年度ごとに1レコード
Team	チーム名、地元/招待区分、会場担当フラグ	24チーム/大会
Player	背番号、選手名、所属チーム	26〜50名/チーム
Group	グループ名（A〜D）、担当会場	4グループ固定
Venue	会場名、住所、使用日	4〜5会場/大会
Match	対戦チーム、日時、会場、スコア、ステージ	予選+決勝T
Goal	得点時間、チーム、得点者名	試合ごとに複数
Standing	勝点、得失点差、総得点、順位	計算値
5.2 エンティティ関連
Tournament 1:N Team, Tournament 1:N Venue, Tournament 1:N Match, Team 1:N Match(home/away), Match 1:N Goal, Group 1:N Team, Venue 1:N Match
 
6. 非機能要件
6.1 対応環境
●	Webブラウザ: Chrome、Safari、Edge（最新版）
●	モバイル対応: タブレット・スマートフォンでの入力を想定したレスポンシブデザイン
●	オフライン対応: ローカルストレージを活用し、オフライン時も入力可能。オンライン復帰時に同期
6.2 性能要件
●	画面遷移: 1秒以内
●	順位計算: 即時（入力完了と同時）
●	報告書PDF生成: 3秒以内
●	Excel出力: 5秒以内
6.3 同時アクセス
●	複数会場から同時入力可能
●	同一試合への重複入力防止（ロック機能）
●	入力競合時のマージ処理
6.4 セキュリティ
●	管理者認証（編集権限）
●	会場担当者認証（該当会場のみ入力可能）
●	閲覧モード（認証不要、結果確認のみ）
 
7. 将来の拡張案
1.	審判割当機能: 各試合への審判自動割り当て
2.	警告累積管理: 選手別の警告累積と出場停止管理
3.	リアルタイム配信: 試合結果のWebサイト公開
4.	複数大会管理: 過去大会データの保持・統計分析
5.	他大会フォーマット対応: ノックアウト方式など異なる大会形式への対応
8. 用語集
用語	説明
予選リーグ	4グループに分かれての総当たり戦（Day1-2）
順位決定戦	各グループ1位による決勝トーナメント（Day3）
研修試合	予選2〜6位チームによる練習試合（Day3）
会場担当校	各グループの試合会場を提供する地元4校
得失点差	総得点 - 総失点（ゴールディファレンス）
────────────────────────────────────────────────────────────
承認欄
作成者: ＿＿＿＿＿＿＿＿＿＿＿＿　　日付: ＿＿＿＿＿＿＿＿
承認者: ＿＿＿＿＿＿＿＿＿＿＿＿　　日付: ＿＿＿＿＿＿＿＿
